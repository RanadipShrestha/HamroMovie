{% load static tailwind_tags %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBooking - Book Your Movie Seats</title>
    <script src="https://kit.fontawesome.com/YOUR_KIT_CODE.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    {% tailwind_css %}
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
</head>
<body class=" text-white">
    <nav class="flex justify-between items-center bg-gray-900 px-6 py-4 shadow-lg">
        <div class="text-3xl font-bold text-red-500">
            <a href="{% url 'home' %}" class="flex items-center space-x-2">
                <i class="fas fa-film"></i>
                <span>MBooking</span>
            </a>
        </div>
        
        <!-- Desktop Navigation -->
        <div class="hidden md:flex space-x-6 text-lg font-semibold">
            <a href="{% url 'home' %}" class="hover:text-red-400 transition">Home</a>
            <a href="{% url 'movie_selection' %}" class="hover:text-red-400 transition">Movies</a>
        </div>
        
        <!-- User Authentication and Profile -->
        <div class="hidden md:flex items-center space-x-4">
            {% if request.user.is_authenticated %}
            <div class="relative">
                <button id="dropdownButton" class="bg-red-500 text-white px-4 py-2 rounded-full font-semibold">{{ request.user.username|first_letter }}</button>
                <div id="dropdownMenu" class="absolute right-0 mt-2 w-48 bg-white text-black rounded-lg shadow-lg hidden z-10">
                    <a href="{% url 'reservation' %}" class="block px-4 py-2 hover:bg-gray-200">Seat Reservation</a>
                    <a href="{% url 'logout' %}" class="block px-4 py-2 hover:bg-gray-200">Logout</a>
                </div>
            </div>
            {% else %}
            <div class="space-x-3">
                <a href="{% url 'login' %}" class="px-4 py-2 bg-red-500 text-white rounded-full font-semibold transition hover:bg-red-600">Log in</a>
                <a href="{% url 'register' %}" class="px-4 py-2 bg-red-500 text-white rounded-full font-semibold transition hover:bg-red-600">Sign up</a>
            </div>
            {% endif %}
        </div>
        
        <!-- Mobile Menu Toggle -->
        <button id="burger-icon" class="md:hidden text-3xl text-red-500">
            <i class="fas fa-bars"></i>
        </button>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden fixed inset-0 bg-black bg-opacity-90 z-50 p-6 flex flex-col items-center space-y-6 text-lg font-semibold text-white">
        <button id="close-menu" class="absolute top-6 right-6 text-3xl">Ã—</button>
        <a href="{% url 'home' %}" class="hover:text-red-400 transition">Home</a>
        <a href="{% url 'movie_selection' %}" class="hover:text-red-400 transition">Movies</a>
        {% if request.user.is_authenticated %}
        <a href="{% url 'reservation' %}" class="hover:text-red-400 transition">Seat Reservation</a>
        <a href="{% url 'logout' %}" class="hover:text-red-400 transition">Logout</a>
        {% else %}
        <a href="{% url 'login' %}" class="px-4 py-2 bg-red-500 text-white rounded-full transition hover:bg-red-600">Log in</a>
        <a href="{% url 'register' %}" class="px-4 py-2 bg-red-500 text-white rounded-full transition hover:bg-red-600">Sign up</a>
        {% endif %}
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Dropdown Button (Desktop)
            const dropdownButton = document.getElementById('dropdownButton');
            const dropdownMenu = document.getElementById('dropdownMenu');
            
            if (dropdownButton) {
                dropdownButton.addEventListener('click', function (event) {
                    event.preventDefault();
                    dropdownMenu.classList.toggle('hidden');
                });
            }

            // Mobile Menu Toggle
            const burgerIcon = document.getElementById('burger-icon');
            const mobileMenu = document.getElementById('mobile-menu');
            const closeMenu = document.getElementById('close-menu');

            burgerIcon.addEventListener('click', function () {
                mobileMenu.classList.remove('hidden');
            });

            closeMenu.addEventListener('click', function () {
                mobileMenu.classList.add('hidden');
            });
        });
    </script>
</body>
</html>
